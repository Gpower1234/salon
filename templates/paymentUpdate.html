{% extends 'layout.html' %}

{% block body %}
<section style="margin-top: 50px; margin-bottom: 250px">
    <center>
        <div class="mt-5 ">
            
            <div class="shadow p-4 mb-3 bg-body bg-body rounded text-black  m-5">
                <h4 style="color: #007bff;">Update Payment</h4>
                {% if appointment %}
                <div class="list-group fs-4 border p-3 mb-3">
                    <p style="font-size: medium; color:#444" class="list-group mt-2">Service: <b style="color: #333; font-size: medium;">{{ appointment.service }}</b style="color: #333;"></p>
                    <p style="font-size: medium; color:#444" class="list-group mt-2">Ordered on: <b style="color: #333; font-size: medium;">{{ appointment.time_ordered }}</b></p>
                    <p style="font-size: medium; color:#444" class="list-group mt-2">Price: <b style="color: #333; font-size: medium;">${{ appointment.price }}</b></p>
                    <p style="font-size: medium; color:#444" class="list-group mt-2">Prev. Deposit <b style="color: #333; font-size: medium;">${{ appointment.deposit }}</b></p>
                    <p style="font-size: medium; color:#444" class="list-group mt-2">Balance<b style="color: #333; font-size: medium;">${{ balance }}</b></p>
                </div>
                {% endif %}
            </div>

        </div>
        <form action="{% url 'paymentUpdate' appointment.id %}" method="post" class="stripe-form">
            {% csrf_token %}
            <script src="https://checkout.stripe.com/checkout.js" class="stripe-button" 
                data-key="{{ Key }}"
                data-description="Payment Gateway"
                data-name="Example charge"
                data-image="https://stripe.com/img/documentation/checkout/marketplace.png"
                data-amount="{{ current_deposit }}"
                data-currency="usd"
                data-locale="auto">
            </script>
        </form>
    </center>
</section>

{% endblock %}